!function(e){function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=4)}([function(e,n,t){"use strict";function i(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}function o(){$(".recipes-list-component").load("./views/recipes/recipes-list.html",s.init),$(".recipe-details-component").load("./views/recipes/recipe-details.html",u.init)}function a(){s.destroyComponent(),u.destroyComponent(),d.destroyForm()}Object.defineProperty(n,"__esModule",{value:!0}),n.init=o,n.destroyComponent=a;var r=t(6),s=i(r),c=t(7),u=i(c),l=t(2),d=i(l)},function(e,n,t){"use strict";function i(e){return new Promise(function(n,t){u.writeData("recipes/",e,function(e,i){if(i)t(i);else{var o=e.data;o.id=e.key,PubSub.publish("recipe-was-added",o),n(o)}})})}function o(){return new Promise(function(e,n){u.getData("recipes/",function(t,i){if(i)n(i);else{var o=[];for(var a in t)if(void 0===t.key){var r=t[a];r.id=a,o.push(r)}e(o.slice())}})})}function a(e){return new Promise(function(n,t){u.updateData("recipes/"+e.id,e,function(e,i){if(i)t(i);else{var o=e.data;o.id=e.key,PubSub.publish("recipe-was-updated",o),n(o)}})})}function r(e){return new Promise(function(n,t){u.deleteData("recipes/"+e,function(e,i){i?t(i):(PubSub.publish("recipes-was-deleted",e),n("The recipe was deleted successfully!"))})})}function s(e){u.watchForDataChange("recipes/",function(n,t){t?e(null,t):e(n)})}Object.defineProperty(n,"__esModule",{value:!0}),n.saveRecipe=i,n.getRecipes=o,n.updateRecipe=a,n.deleteRecipe=r,n.onRecipesChange=s;var c=t(3),u=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}(c)},function(e,n,t){"use strict";function i(){l=$(".recipeFormComponent"),d=$("#recipeForm"),v=l.find("#titleInput"),b=l.find("#imageUrlInput"),h=l.find("#imgPreview"),m=l.find("#descriptionInput"),g=l.find("#ingredientsInput"),w=l.find("#submitBtn"),y=l.find("#cancelBtn");var e=$("#formTitle");c=PubSub.subscribe("recipe-form-mode",function(n,t){u=t.mode,e.text("Add Recipe"),t.recipe&&(f=t.recipe,e.text("Edit Recipe"),v.val(f.name),b.val(f.imgUrl),h.attr("src",f.imgUrl),h.fadeIn(),m.val(f.description),g.val(f.ingredients.join("\n")))}),h.on("error",function(){$(this).hide()}),$("#imageUrlInput").on("input",function(){h.attr("src",$(this).val()).fadeIn()}),y.on("click",function(){r()}),$.validator.setDefaults({submitHandler:function(){"add"===u?(console.log("recipe added"),o()):"edit"===u&&a(),r()}}),p=d.validate({rules:{titleInput:{required:!0,minlength:3,maxlength:35},imageUrlInput:{required:!0},descriptionInput:{required:!0,minlength:5},ingredientsInput:{required:!0}},messages:{titleInput:{required:"The field is required!",minlength:"The title is too short",maxlength:"The title is too long"},imageUrlInput:{required:"The field is required."},descriptionInput:{required:"The field is required",minlength:"The description is too short"},ingredientsInput:{required:"The field is required"}}})}function o(){var e=g.val().split("\n");P.saveRecipe({name:v.val(),imgUrl:b.val(),description:m.val(),ingredients:e}).then(function(e){}).catch(function(e){console.log(e)})}function a(){var e=g.val().split("\n");f.name=v.val(),f.imgUrl=b.val(),f.description=m.val(),f.ingredients=e,P.updateRecipe(f).then(function(e){}).catch(function(e){console.log(e)})}function r(){l.html(""),l.hide(),s()}function s(){l=null,u=null,PubSub.unsubscribe(c),p&&p.destroy()}Object.defineProperty(n,"__esModule",{value:!0}),n.init=i,n.destroyForm=s;var c,u,l,d,p,f,v,b,h,m,g,w,y,C=t(1),P=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}(C)},function(e,n,t){"use strict";function i(e,n){firebase.database().ref(e).once("value").then(function(e){n(e.val(),null)}).catch(function(e){n(null,e)})}function o(e,n){firebase.database().ref(e).on("value",function(e){console.log(e.val(),"CHANGE WATCHER"),n(e.val(),null)})}function a(e,n,t){var i=firebase.database().ref(e),o=i.push();o.set(n).then(function(){o.once("value").then(function(e){var n=e.val();t({data:n,key:o.key})})}).catch(function(e){t(null,e)})}function r(e,n,t){var i=firebase.database().ref(e);i.set(n).then(function(){i.once("value").then(function(e){var n=e.val();t({data:n,key:i.key})})}).catch(function(e){t(null,e)})}function s(e,n){var t=firebase.database().ref(e);t.remove().then(function(){n(t.key,null)}).catch(function(e){n(e)})}Object.defineProperty(n,"__esModule",{value:!0}),n.getData=i,n.watchForDataChange=o,n.writeData=a,n.updateData=r,n.deleteData=s;var c={apiKey:"AIzaSyCqHk8WkuwnAgCC_mimicFaBQqgwSMar3c",authDomain:"team9-recipe-book.firebaseapp.com",databaseURL:"https://team9-recipe-book.firebaseio.com",projectId:"team9-recipe-book",storageBucket:"team9-recipe-book.appspot.com",messagingSenderId:"792166497012"};firebase.initializeApp(c)},function(e,n,t){"use strict";function i(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}var o=t(5),a=i(o),r=t(8),s=i(r),c=t(3),u=(i(c),t(10)),l=i(u);$(function(){a.init(),$("header").load("./views/core/header.html",s.init),$(".sidenav-container").load("./views/core/sidenav.html",l.init)})},function(e,n,t){"use strict";function i(){PubSub.subscribe("recipe-was-unloaded",function(){console.log("recipe destroyed"),a.destroyComponent()})}Object.defineProperty(n,"__esModule",{value:!0}),n.init=i;var o=t(0),a=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}(o)},function(e,n,t){"use strict";function i(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}function o(){u=$(".recipes-list-container"),l=$("#addFormComponent"),l.hide();var e=$("#addRecipe"),n=[];h.getRecipes().then(function(e){n=e,r(n)}).catch(function(e){console.log(e)}),p=PubSub.subscribe("recipes-was-deleted",function(e,t){n=n.filter(function(e){if(e.id!==t)return e}),u.find(".foodBox[data-id="+t+"]").remove()}),f=PubSub.subscribe("recipe-was-added",function(e,t){var i=t;console.log("before",n),n.push(i),console.log("after",n),a(i)}),v=PubSub.subscribe("recipe-was-updated",function(e,t){u.html(""),r(n)}),u.on("click",".foodBox",function(){var e=$(this),t=$(this).attr("data-id"),i=n.find(function(e){if(e.id===t)return e});e.toggleClass("active").siblings().removeClass("active"),e.hasClass("active")?PubSub.publish("recipe-was-selected",i):PubSub.publish("recipe-was-unselected",i)}),e.on("click",function(){l.show(),l.load("./views/recipes/recipes-form.html",function(){g.init(),PubSub.publish("recipe-form-mode",{mode:"add"})})})}function a(e){if(e){var n=$("<div>");n.attr("data-id",e.id),n.addClass("foodBox");var t=$("<h3>"),i=$("<p>"),o=$("<div>");o.append(t),o.append(i),o.addClass("texts");var a=$("<img>"),r=$("<div>");r.append(a),r.addClass("image"),t.text(e.name),i.text(e.description),a.attr("src",e.imgUrl),n.append(o),n.append(r),u.append(n)}}function r(e,n){e.length>0&&(n&&e.sort(s),e.forEach(function(e){a(e)}))}function s(e,n){var t=e.name.toLowerCase(),i=n.name.toLowerCase();return t<i?-1:t>i?1:0}function c(){u=null,PubSub.unsubscribe(d),PubSub.unsubscribe(p),PubSub.unsubscribe(f),PubSub.unsubscribe(v)}Object.defineProperty(n,"__esModule",{value:!0}),n.init=o,n.destroyComponent=c;var u,l,d,p,f,v,b=t(1),h=i(b),m=t(2),g=i(m)},function(e,n,t){"use strict";function i(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}function o(){u=$(".recipe-desc"),u.css("display","none"),l=$("#editFormComponent"),l.hide();var e;d=PubSub.subscribe("recipe-was-selected",function(n,t){console.log("selected"),r(),e=t,a(t)}),p=PubSub.subscribe("recipe-was-unselected",function(n,t){console.log("unselected"),s(),e=null}),f=PubSub.subscribe("recipe-was-updated",function(e,n){a(n)}),u.on("click","#settingsButton, .dropdownMenu li",function(){u.find(".dropdownMenu").slideToggle(200),u.find(".icon-gear").toggleClass("down")}),u.on("click","#editRecipeBtn",function(){l.load("./views/recipes/recipes-form.html",function(){m.init(),l.show(),PubSub.publish("recipe-form-mode",{mode:"edit",recipe:e})})}),u.on("click","#deleteRecipeBtn",function(){b.deleteRecipe(e.id).then(function(e){console.log(e),s()}).catch(function(e){console.log(e)})})}function a(e){u.html("");var n=$("<div>");n.addClass("recipe-image");var t=$("<div>");t.addClass("settingsContainer");var i=$("<a>");i.addClass("icon-btn"),i.attr("id","settingsButton");var o=$("<span>");i.append(o),o.addClass("icon icon-gear rotate"),t.append(i);var a=$("<ul>");a.addClass("dropdownMenu");var r=$("<li>");r.addClass("item"),r.attr("id","editRecipeBtn"),r.text("Edit");var s=$("<li>");s.addClass("item"),s.attr("id","deleteRecipeBtn"),s.text("Delete"),a.append(r),a.append(s),t.append(a);var c=$("<img>");c.attr("src",e.imgUrl),n.append(t),n.append(c);var l=$("<div>");l.addClass("recipe-info");var d=$("<div>");d.addClass("title"),d.html("<h3>"+e.name+"</h3>");var p=$("<div>");p.addClass("description"),p.text(e.description);var f=$("<div>");f.addClass("ingredients"),f.html("<p>Ingredients:</p>");var v=$("<ul>");v.addClass("list"),e.ingredients.forEach(function(e){var n=$("<li>");n.addClass("item"),n.text(e),v.append(n)}),f.append(v),l.append(d),l.append(p),l.append(f),u.append(n),u.append(l)}function r(){u.css("display","flex"),u.html("")}function s(){u.css("display","none"),u.html("")}function c(){u=null,PubSub.unsubscribe(d),PubSub.unsubscribe(p),PubSub.unsubscribe(f)}Object.defineProperty(n,"__esModule",{value:!0}),n.init=o,n.destroyComponent=c;var u,l,d,p,f,v=t(1),b=i(v),h=t(2),m=i(h)},function(e,n,t){"use strict";function i(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}function o(){s.init({routes:["/","#home","#recipes"]}),$("#navHamburger").on("click",function(){$(this).toggleClass("active"),$(".shadow").fadeToggle(),$(".sidenav .list").toggle2Classes("slide-in","slide-out"),"-1"===$(".sidenav-component").css("z-index")?$(".sidenav-component").toggleZindex():setTimeout(function(){$(".sidenav-component").toggleZindex()},500)}),$("#git-btn").on("click",function(){window.open("https://github.com/bpopnikolov/Team9-JSAlpha","_blank")}),$(".git-logo").attr("src","../../assets/images/GitHub-Mark-32px.png"),$(".logo").on("click",function(){window.location.hash="#home"}),$("#home-btn").on("click",function(){window.location.hash="#home"}),$("#recipes-btn").on("click",function(){window.location.hash="#recipes"})}Object.defineProperty(n,"__esModule",{value:!0}),n.init=o;var a=t(0),r=(i(a),t(9)),s=i(r);$.fn.toggle2Classes=function(e,n){return e&&n?this.each(function(){var t=$(this);t.hasClass(e)||t.hasClass(n)?t.toggleClass(e+" "+n):t.addClass(e)}):this},$.fn.toggleZindex=function(){var e=$(this);return"-1"===e.css("z-index")?e.css("z-index","100"):e.css("z-index","-1"),this}},function(e,n,t){"use strict";function i(e){var n=e.routes;if(location.hash||(location.hash=n[1],$(".app-container").load("../views/core/home.html")),window.location.hash)if(n.includes(d)||""===d){var t=d.substring(1);o(t),s(t)}else c();$(window).on("hashchange",function(e){var t=r(),i=t.substring(1);console.log(i),n.includes(t)?(console.log("has route change"),t!==d&&(o(i),s(i))):(c(),location.href="#page-not-found"),d=t})}function o(e){$(".list .active").removeClass("active"),$("#"+e+"-btn").addClass("active")}function a(e){return e.toString().replace(/\/$/,"").replace(/^\//,"")}function r(){return a(decodeURI(location.hash+location.search))}function s(e){"#recipes"===d&&PubSub.publish("recipe-was-unloaded"),"home"===e?$(".app-container").load("../../views/core/"+e+".html"):"recipes"===e&&$(".app-container").load("../../views/recipes/"+e+".html",l.init)}function c(){"#recipes"===d&&PubSub.publish("recipe-was-unloaded"),$(".app-container").load("../../views/core/page-not-found.html"),$(".list .active").removeClass("active")}Object.defineProperty(n,"__esModule",{value:!0}),n.init=i;var u=t(0),l=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n.default=e,n}(u),d=r()},function(e,n,t){"use strict";function i(){$(".sidenav a, .shadow").on("click",function(){$("#navHamburger").toggleClass("active"),$(".shadow").fadeToggle(),$(".sidenav .list").toggle2Classes("slide-in","slide-out"),"-1"===$(".sidenav-component").css("z-index")?$(".sidenav-component").toggleZindex():setTimeout(function(){$(".sidenav-component").toggleZindex()},500)})}Object.defineProperty(n,"__esModule",{value:!0}),n.init=i}]);