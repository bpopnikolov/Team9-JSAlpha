!function(e){function n(t){if(i[t])return i[t].exports;var o=i[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var i={};n.m=e,n.c=i,n.d=function(e,i,t){n.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:t})},n.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(i,"a",i),i},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=4)}([function(e,n,i){"use strict";function t(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n.default=e,n}function o(){$(".recipes-list-component").load("./views/recipes/recipes-list.html",s.init),$(".recipe-details-component").load("./views/recipes/recipe-details.html",u.init)}function a(){s.destroyComponent(),u.destroyComponent(),d.destroyForm()}Object.defineProperty(n,"__esModule",{value:!0}),n.init=o,n.destroyComponent=a;var r=i(6),s=t(r),c=i(7),u=t(c),l=i(2),d=t(l)},function(e,n,i){"use strict";function t(e){return new Promise(function(n,i){u.writeData("recipes/",e,function(e,t){if(t)i(t);else{var o=e.data;o.id=e.key,l.push(o),PubSub.publish("recipe-was-added",o),n(o)}})})}function o(){return new Promise(function(e,n){u.getData("recipes/",function(i,t){t?n(t):e(i)})})}function a(e){return new Promise(function(n,i){u.updateData("recipes/"+e.id,e,function(e,t){if(t)i(t);else{var o=e.data;o.id=e.key,l.forEach(function(e){e.id===o.id&&(e=o)}),PubSub.publish("recipe-was-updated",o),n(o)}})})}function r(e){return new Promise(function(i,t){u.deleteData("recipes/"+e,function(e,o){o?t(o):(n.allRecipes=l=l.filter(function(n){if(n.id!==e)return n}),PubSub.publish("recipes-was-deleted",e),i("The recipe was deleted successfully!"))})})}function s(e){u.watchForDataChange("recipes/",function(n,i){i?e(null,i):e(n)})}Object.defineProperty(n,"__esModule",{value:!0}),n.allRecipes=void 0,n.saveRecipe=t,n.getRecipes=o,n.updateRecipe=a,n.deleteRecipe=r,n.onRecipesChange=s;var c=i(3),u=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n.default=e,n}(c),l=n.allRecipes=[];o().then(function(e){for(var n in e)if(void 0===e.key){var i=e[n];i.id=n,l.push(i)}PubSub.publish("recipes-has-changed",l.slice())})},function(e,n,i){"use strict";function t(){l=$(".recipeFormComponent"),d=$("#recipeForm"),v=l.find("#titleInput"),b=l.find("#imageUrlInput"),h=l.find("#imgPreview"),m=l.find("#descriptionInput"),g=l.find("#ingredientsInput"),w=l.find("#submitBtn"),y=l.find("#cancelBtn");var e=$("#formTitle");c=PubSub.subscribe("recipe-form-mode",function(n,i){u=i.mode,e.text("Add Recipe"),i.recipe&&(f=i.recipe,e.text("Edit Recipe"),v.val(f.name),b.val(f.imgUrl),h.attr("src",f.imgUrl),h.fadeIn(),m.val(f.description),g.val(f.ingredients.join("\n")))}),h.on("error",function(){$(this).hide()}),$("#imageUrlInput").on("input",function(){h.attr("src",$(this).val()).fadeIn()}),y.on("click",function(){r()}),$.validator.setDefaults({submitHandler:function(){"add"===u?(console.log("recipe added"),o()):"edit"===u&&a(),r()}}),p=d.validate({rules:{titleInput:{required:!0,minlength:3,maxlength:35},imageUrlInput:{required:!0},descriptionInput:{required:!0,minlength:5},ingredientsInput:{required:!0}},messages:{titleInput:{required:"The field is required!",minlength:"The title is too short",maxlength:"The title is too long"},imageUrlInput:{required:"The field is required."},descriptionInput:{required:"The field is required",minlength:"The description is too short"},ingredientsInput:{required:"The field is required"}}})}function o(){var e=g.val().split("\n");C.saveRecipe({name:v.val(),imgUrl:b.val(),description:m.val(),ingredients:e}).then(function(e){}).catch(function(e){console.log(e)})}function a(){var e=g.val().split("\n");f.name=v.val(),f.imgUrl=b.val(),f.description=m.val(),f.ingredients=e,C.updateRecipe(f).then(function(e){}).catch(function(e){console.log(e)})}function r(){l.html(""),l.hide(),s()}function s(){l=null,u=null,PubSub.unsubscribe(c),p&&p.destroy()}Object.defineProperty(n,"__esModule",{value:!0}),n.init=t,n.destroyForm=s;var c,u,l,d,p,f,v,b,h,m,g,w,y,P=i(1),C=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n.default=e,n}(P)},function(e,n,i){"use strict";function t(e,n){firebase.database().ref(e).once("value").then(function(e){n(e.val(),null)}).catch(function(e){n(null,e)})}function o(e,n){firebase.database().ref(e).on("value",function(e){console.log(e.val(),"CHANGE WATCHER"),n(e.val(),null)})}function a(e,n,i){var t=firebase.database().ref(e),o=t.push();o.set(n).then(function(){o.once("value").then(function(e){var n=e.val();i({data:n,key:o.key})})}).catch(function(e){i(null,e)})}function r(e,n,i){var t=firebase.database().ref(e);t.set(n).then(function(){t.once("value").then(function(e){var n=e.val();i({data:n,key:t.key})})}).catch(function(e){i(null,e)})}function s(e,n){var i=firebase.database().ref(e);i.remove().then(function(){n(i.key,null)}).catch(function(e){n(e)})}Object.defineProperty(n,"__esModule",{value:!0}),n.getData=t,n.watchForDataChange=o,n.writeData=a,n.updateData=r,n.deleteData=s;var c={apiKey:"AIzaSyCqHk8WkuwnAgCC_mimicFaBQqgwSMar3c",authDomain:"team9-recipe-book.firebaseapp.com",databaseURL:"https://team9-recipe-book.firebaseio.com",projectId:"team9-recipe-book",storageBucket:"team9-recipe-book.appspot.com",messagingSenderId:"792166497012"};firebase.initializeApp(c)},function(e,n,i){"use strict";function t(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n.default=e,n}var o=i(5),a=t(o),r=i(8),s=t(r),c=i(3),u=(t(c),i(10)),l=t(u);$(function(){a.init(),$("header").load("./views/core/header.html",s.init),$(".sidenav-container").load("./views/core/sidenav.html",l.init)})},function(e,n,i){"use strict";function t(){PubSub.subscribe("recipe-was-unloaded",function(){console.log("recipe destroyed"),a.destroyComponent()})}Object.defineProperty(n,"__esModule",{value:!0}),n.init=t;var o=i(0),a=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n.default=e,n}(o)},function(e,n,i){"use strict";function t(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n.default=e,n}function o(){u=$(".recipes-list-container"),l=$("#addFormComponent"),l.hide();var e=$("#addRecipe"),n=h.allRecipes;r(n,!0),d=PubSub.subscribe("recipes-has-changed",function(e,i){n=i,u.html(""),r(i,!0)}),p=PubSub.subscribe("recipes-was-deleted",function(e,i){n=n.filter(function(e){if(e.id!==i)return e}),u.find(".foodBox[data-id="+i+"]").remove()}),f=PubSub.subscribe("recipe-was-added",function(e,i){var t=i;n.push(t),a(t)}),v=PubSub.subscribe("recipe-was-updated",function(e,i){u.html(""),r(n)}),u.on("click",".foodBox",function(){var e=$(this),i=$(this).attr("data-id"),t=n.find(function(e){if(e.id===i)return e});e.toggleClass("active").siblings().removeClass("active"),e.hasClass("active")?PubSub.publish("recipe-was-selected",t):PubSub.publish("recipe-was-unselected",t)}),e.on("click",function(){l.show(),l.load("./views/recipes/recipes-form.html",function(){g.init(),PubSub.publish("recipe-form-mode",{mode:"add"})})})}function a(e){if(e){var n=$("<div>");n.attr("data-id",e.id),n.addClass("foodBox");var i=$("<h3>"),t=$("<p>"),o=$("<div>");o.append(i),o.append(t),o.addClass("texts");var a=$("<img>"),r=$("<div>");r.append(a),r.addClass("image"),i.text(e.name),t.text(e.description),a.attr("src",e.imgUrl),n.append(o),n.append(r),u.append(n)}}function r(e,n){e.length>0&&(n&&e.sort(s),e.forEach(function(e){a(e)}))}function s(e,n){var i=e.name.toLowerCase(),t=n.name.toLowerCase();return i<t?-1:i>t?1:0}function c(){u=null,PubSub.unsubscribe(d),PubSub.unsubscribe(p),PubSub.unsubscribe(f),PubSub.unsubscribe(v)}Object.defineProperty(n,"__esModule",{value:!0}),n.init=o,n.destroyComponent=c;var u,l,d,p,f,v,b=i(1),h=t(b),m=i(2),g=t(m)},function(e,n,i){"use strict";function t(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n.default=e,n}function o(){u=$(".recipe-desc"),u.css("display","none"),l=$("#editFormComponent"),l.hide();var e;d=PubSub.subscribe("recipe-was-selected",function(n,i){console.log(i),r(),e=i,a(i)}),p=PubSub.subscribe("recipe-was-unselected",function(n,i){console.log("unselected"),console.log(i),s(),e=null}),f=PubSub.subscribe("recipe-was-updated",function(e,n){a(n)}),u.on("click","#settingsButton, .dropdownMenu li",function(){u.find(".dropdownMenu").slideToggle(200),u.find(".icon-gear").toggleClass("down")}),u.on("click","#editRecipeBtn",function(){l.load("./views/recipes/recipes-form.html",function(){m.init(),l.show(),PubSub.publish("recipe-form-mode",{mode:"edit",recipe:e})})}),u.on("click","#deleteRecipeBtn",function(){b.deleteRecipe(e.id).then(function(e){console.log(e),s()}).catch(function(e){console.log(e)})})}function a(e){u.html("");var n=$("<div>");n.addClass("recipe-image");var i=$("<div>");i.addClass("settingsContainer");var t=$("<a>");t.addClass("icon-btn"),t.attr("id","settingsButton");var o=$("<span>");t.append(o),o.addClass("icon icon-gear rotate"),i.append(t);var a=$("<ul>");a.addClass("dropdownMenu");var r=$("<li>");r.addClass("item"),r.attr("id","editRecipeBtn"),r.text("Edit");var s=$("<li>");s.addClass("item"),s.attr("id","deleteRecipeBtn"),s.text("Delete"),a.append(r),a.append(s),i.append(a);var c=$("<img>");c.attr("src",e.imgUrl),n.append(i),n.append(c);var l=$("<div>");l.addClass("recipe-info");var d=$("<div>");d.addClass("title"),d.html("<h3>"+e.name+"</h3>");var p=$("<div>");p.addClass("description"),p.text(e.description);var f=$("<div>");f.addClass("ingredients"),f.html("<p>Ingredients:</p>");var v=$("<ul>");v.addClass("list"),e.ingredients.forEach(function(e){var n=$("<li>");n.addClass("item"),n.text(e),v.append(n)}),f.append(v),l.append(d),l.append(p),l.append(f),u.append(n),u.append(l)}function r(){u.css("display","flex"),u.html("")}function s(){u.css("display","none"),u.html("")}function c(){u=null,PubSub.unsubscribe(d),PubSub.unsubscribe(p),PubSub.unsubscribe(f)}Object.defineProperty(n,"__esModule",{value:!0}),n.init=o,n.destroyComponent=c;var u,l,d,p,f,v=i(1),b=t(v),h=i(2),m=t(h)},function(e,n,i){"use strict";function t(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n.default=e,n}function o(){s.init({routes:["/","#home","#recipes"]}),$("#navHamburger").on("click",function(){$(this).toggleClass("active"),$(".shadow").fadeToggle(),$(".sidenav .list").toggle2Classes("slide-in","slide-out"),"-1"===$(".sidenav-component").css("z-index")?$(".sidenav-component").toggleZindex():setTimeout(function(){$(".sidenav-component").toggleZindex()},500)}),$("#git-btn").on("click",function(){window.open("https://github.com/bpopnikolov/Team9-JSAlpha","_blank")}),$(".git-logo").attr("src","../../assets/images/GitHub-Mark-32px.png"),$(".logo").on("click",function(){window.location.hash="#home"}),$("#home-btn").on("click",function(){window.location.hash="#home"}),$("#recipes-btn").on("click",function(){window.location.hash="#recipes"})}Object.defineProperty(n,"__esModule",{value:!0}),n.init=o;var a=i(0),r=(t(a),i(9)),s=t(r);$.fn.toggle2Classes=function(e,n){return e&&n?this.each(function(){var i=$(this);i.hasClass(e)||i.hasClass(n)?i.toggleClass(e+" "+n):i.addClass(e)}):this},$.fn.toggleZindex=function(){var e=$(this);return"-1"===e.css("z-index")?e.css("z-index","100"):e.css("z-index","-1"),this}},function(e,n,i){"use strict";function t(e){var n=e.routes;if(location.hash||(location.hash=n[1],$(".app-container").load("../views/core/home.html")),window.location.hash)if(n.includes(d)||""===d){var i=d.substring(1);o(i),s(i)}else c();$(window).on("hashchange",function(e){var i=r(),t=i.substring(1);console.log(t),n.includes(i)?(console.log("has route change"),i!==d&&(o(t),s(t))):(c(),location.href="#page-not-found"),d=i})}function o(e){$(".list .active").removeClass("active"),$("#"+e+"-btn").addClass("active")}function a(e){return e.toString().replace(/\/$/,"").replace(/^\//,"")}function r(){return a(decodeURI(location.hash+location.search))}function s(e){"#recipes"===d&&PubSub.publish("recipe-was-unloaded"),"home"===e?$(".app-container").load("../../views/core/"+e+".html"):"recipes"===e&&$(".app-container").load("../../views/recipes/"+e+".html",l.init)}function c(){"#recipes"===d&&PubSub.publish("recipe-was-unloaded"),$(".app-container").load("../../views/core/page-not-found.html"),$(".list .active").removeClass("active")}Object.defineProperty(n,"__esModule",{value:!0}),n.init=t;var u=i(0),l=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n.default=e,n}(u),d=r()},function(e,n,i){"use strict";function t(){$(".sidenav a, .shadow").on("click",function(){$("#navHamburger").toggleClass("active"),$(".shadow").fadeToggle(),$(".sidenav .list").toggle2Classes("slide-in","slide-out"),"-1"===$(".sidenav-component").css("z-index")?$(".sidenav-component").toggleZindex():setTimeout(function(){$(".sidenav-component").toggleZindex()},500)})}Object.defineProperty(n,"__esModule",{value:!0}),n.init=t}]);